/*!
 *  Copyright (c) 2022 American Mathematical Society
 *
 *  Licensed under the Apache License, Version 2.0 (the "License");
 *  you may not use this file except in compliance with the License.
 *  You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 *  Unless required by applicable law or agreed to in writing, software
 *  distributed under the License is distributed on an "AS IS" BASIS,
 *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 *  See the License for the specific language governing permissions and
 *  limitations under the License.
 */

import { Configuration } from "mathjax-full/js/input/tex/Configuration.js";
import { CommandMap } from "mathjax-full/js/input/tex/SymbolMap.js";
import { ParseMethod } from "mathjax-full/js/input/tex/Types.js";
import TexParser from "mathjax-full/js/input/tex/TexParser";
import BaseMethods from "mathjax-full/js/input/tex/base/BaseMethods.js";

let dbnsymbMethods: Record<string, ParseMethod> = {};

interface dbnDatum {
  src: string;
  valign?: string;
  width?: string;
  height?: string;
  alt: string;
}

type dbnObj = {
  [key: string]: dbnDatum;
};

const dbnData: dbnObj = {
  actsonleft: {
    src: "data:image/svg+xml;utf8,<svg version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' width='93.673264' height='64.701721' viewBox='0 0 93.673264 64.701721'><path d='M81.995392 25.272659L92.507629 30.528778L83.309418 39.727005' style='stroke:rgb(0.000000%,0.000000%,0.000000%); stroke-width: 2.331253;stroke-linecap: round;stroke-linejoin: round;stroke-miterlimit: 10.000000;fill: none;'></path><path d='M92.507629 9.504288L92.489990 9.504288L92.437698 9.486969L92.332474 9.469330L92.174637 9.434357L91.929535 9.364426L91.631500 9.294159L91.211243 9.206589L90.720413 9.101364L90.107346 8.961166L89.406372 8.803650L88.583176 8.610840L87.672089 8.400711L86.638443 8.172943L85.516891 7.927521L84.308090 7.664780L83.011703 7.384399L81.645065 7.086685L80.208160 6.771332L78.701645 6.455978L77.177170 6.122971L75.600388 5.789978L73.988647 5.457291L72.376587 5.124298L70.747208 4.791306L69.135468 4.475952L67.523407 4.143265L65.929306 3.845230L64.352219 3.529877L62.810410 3.249817L61.286255 2.969437L59.814697 2.706680L58.360474 2.461273L56.958862 2.215851L55.592224 1.988083L54.278198 1.777954L52.999130 1.585144L51.755035 1.409973L50.546234 1.252457L49.390030 1.112274L48.268494 0.972076L47.164917 0.849213L46.113617 0.761627L45.097305 0.674042L44.098618 0.604111L43.152557 0.533859L42.206497 0.498886L41.295395 0.463913L40.419601 0.463913L39.543472 0.463913L38.702316 0.463913L37.879120 0.498886L37.055603 0.533859L36.267059 0.604111L35.461182 0.656723L34.690277 0.744308L33.761536 0.849213L32.833115 0.989395L31.922028 1.147232L31.010925 1.304749L30.117477 1.497559L29.224030 1.690369L28.347900 1.918137L27.471771 2.163239L26.613297 2.426300L25.754807 2.689041L24.913971 2.986755L24.072815 3.302109L23.249298 3.635101L22.443420 3.985428L21.637558 4.353394L20.866653 4.739014L20.095749 5.141937L19.342499 5.562195L18.606552 5.982788L17.888275 6.438324L17.187302 6.893875L16.503983 7.367065L15.855942 7.839935L15.225235 8.348099L14.611847 8.838623L14.033752 9.346771L13.472992 9.872253L12.947495 10.398071L12.456985 10.923553L11.983795 11.466675L11.545883 11.992477L11.125305 12.535614L10.740021 13.078735L10.389374 13.621872L10.074020 14.164993L9.776306 14.708130L9.513565 15.251251L9.285797 15.776733L9.075348 16.319870L8.900177 16.845352L8.742661 17.388474L8.619797 17.914276L8.532211 18.439774L8.462280 18.965576L8.427307 19.491058L8.409668 20.016541L8.427307 20.542343L8.462280 21.067825L8.532211 21.593628L8.619797 22.119110L8.742661 22.644608L8.900177 23.187729L9.075348 23.713531L9.285797 24.256668L9.513565 24.782150L9.776306 25.325272L10.074020 25.868408L10.389374 26.411530L10.740021 26.954666L11.125305 27.497787L11.545883 28.040909L11.983795 28.566727L12.456985 29.109848L12.947495 29.635330L13.472992 30.161133L14.033752 30.686615L14.611847 31.194778L15.225235 31.685303L15.855942 32.193451L16.503983 32.666336L17.187302 33.139526L17.888275 33.595062L18.606552 34.050613L19.342499 34.470871L20.095749 34.891449L20.866653 35.294388L21.637558 35.680008L22.443420 36.047974L23.249298 36.398285L24.072815 36.731293L24.913971 37.046646L25.754807 37.344360L26.613297 37.607101L27.471771 37.869843L28.347900 38.115265L29.224030 38.343033L30.117477 38.535843L31.010925 38.728638L31.922028 38.886154L32.833115 39.043991L33.761536 39.183868L34.690277 39.289093L35.461182 39.376678L36.267059 39.429291L37.055603 39.499542L37.879120 39.534515L38.702316 39.569489L39.543472 39.569489L40.419601 39.569489L41.295395 39.569489L42.206497 39.534515L43.152557 39.499542L44.098618 39.429291L45.097305 39.359360L46.113617 39.271774L47.164917 39.183868L48.268494 39.061325L49.390030 38.921127L50.546234 38.780930L51.755035 38.623413L52.999130 38.448257L54.278198 38.255447L55.592224 38.045319L56.958862 37.817551L58.360474 37.572128L59.814697 37.326706L61.286255 37.063965L62.810410 36.783585L64.352219 36.503510L65.929306 36.188156L67.523407 35.890137L69.135468 35.557449L70.747208 35.241776L72.376587 34.909103L73.988647 34.576096L75.600388 34.243423L77.177170 33.910431L78.701645 33.577423L80.208160 33.262070L81.645065 32.946716L83.011703 32.649002L84.308090 32.368622L85.516891 32.105881L86.638443 31.860458L87.672089 31.632690L88.583176 31.422562L89.406372 31.229752L90.107346 31.071915L90.720413 30.932037L91.211243 30.826813L91.631500 30.739227L91.929535 30.668976L92.174637 30.599045L92.332474 30.564072L92.437698 30.546432L92.489990 30.528778L92.507629 30.528778' style='stroke:rgb(0.000000%,0.000000%,0.000000%); stroke-width: 2.331253;stroke-linecap: round;stroke-linejoin: round;stroke-miterlimit: 10.000000;fill: none;'></path></svg>",
    valign: "-.33ex",
    width: ".7em",
    height: ".7em",
    alt: "curved arrow from left to left",
  },
  actsonright: {
    src: "data:image/svg+xml;utf8,<svg version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' width='93.673264' height='64.701721' viewBox='0 0 93.673264 64.701721'><path d='M18.921921 25.272659L8.409668 30.528778L17.607880 39.727005' style='stroke:rgb(0.000000%,0.000000%,0.000000%); stroke-width: 2.331253;stroke-linecap: round;stroke-linejoin: round;stroke-miterlimit: 10.000000;fill: none;'></path><path d='M8.409668 9.504288L8.427307 9.504288L8.479599 9.486969L8.584824 9.469330L8.742661 9.434357L8.987762 9.364426L9.285797 9.294159L9.706055 9.206589L10.196884 9.101364L10.809952 8.961166L11.510925 8.803650L12.334122 8.610840L13.245209 8.400711L14.278854 8.172943L15.400406 7.927521L16.609207 7.664780L17.905594 7.384399L19.272232 7.086685L20.709137 6.771332L22.215652 6.455978L23.740128 6.122971L25.316910 5.789978L26.928650 5.457291L28.540710 5.124298L30.170090 4.791306L31.781830 4.475952L33.393890 4.143265L34.987991 3.845230L36.565079 3.529877L38.106888 3.249817L39.631042 2.969437L41.102600 2.706680L42.556824 2.461273L43.958435 2.215851L45.325073 1.988083L46.639099 1.777954L47.918167 1.585144L49.162262 1.409973L50.371063 1.252457L51.527267 1.112274L52.648804 0.972076L53.752380 0.849213L54.803680 0.761627L55.819992 0.674042L56.818680 0.604111L57.764740 0.533859L58.710800 0.498886L59.621902 0.463913L60.497696 0.463913L61.373825 0.463913L62.214981 0.463913L63.038177 0.498886L63.861694 0.533859L64.650238 0.604111L65.456116 0.656723L66.227020 0.744308L67.155762 0.849213L68.084183 0.989395L68.995270 1.147232L69.906372 1.304749L70.799820 1.497559L71.693268 1.690369L72.569397 1.918137L73.445526 2.163239L74.304001 2.426300L75.162491 2.689041L76.003326 2.986755L76.844482 3.302109L77.667999 3.635101L78.473877 3.985428L79.279739 4.353394L80.050644 4.739014L80.821548 5.141937L81.574799 5.562195L82.310745 5.982788L83.029022 6.438324L83.729996 6.893875L84.413315 7.367065L85.061356 7.839935L85.692062 8.348099L86.305450 8.838623L86.883545 9.346771L87.444305 9.872253L87.969803 10.398071L88.460312 10.923553L88.933502 11.466675L89.371414 11.992477L89.791992 12.535614L90.177277 13.078735L90.527924 13.621872L90.843277 14.164993L91.140991 14.708130L91.403732 15.251251L91.631500 15.776733L91.841949 16.319870L92.017120 16.845352L92.174637 17.388474L92.297501 17.914276L92.385086 18.439774L92.455017 18.965576L92.489990 19.491058L92.507629 20.016541L92.489990 20.542343L92.455017 21.067825L92.385086 21.593628L92.297501 22.119110L92.174637 22.644608L92.017120 23.187729L91.841949 23.713531L91.631500 24.256668L91.403732 24.782150L91.140991 25.325272L90.843277 25.868408L90.527924 26.411530L90.177277 26.954666L89.791992 27.497787L89.371414 28.040909L88.933502 28.566727L88.460312 29.109848L87.969803 29.635330L87.444305 30.161133L86.883545 30.686615L86.305450 31.194778L85.692062 31.685303L85.061356 32.193451L84.413315 32.666336L83.729996 33.139526L83.029022 33.595062L82.310745 34.050613L81.574799 34.470871L80.821548 34.891449L80.050644 35.294388L79.279739 35.680008L78.473877 36.047974L77.667999 36.398285L76.844482 36.731293L76.003326 37.046646L75.162491 37.344360L74.304001 37.607101L73.445526 37.869843L72.569397 38.115265L71.693268 38.343033L70.799820 38.535843L69.906372 38.728638L68.995270 38.886154L68.084183 39.043991L67.155762 39.183868L66.227020 39.289093L65.456116 39.376678L64.650238 39.429291L63.861694 39.499542L63.038177 39.534515L62.214981 39.569489L61.373825 39.569489L60.497696 39.569489L59.621902 39.569489L58.710800 39.534515L57.764740 39.499542L56.818680 39.429291L55.819992 39.359360L54.803680 39.271774L53.752380 39.183868L52.648804 39.061325L51.527267 38.921127L50.371063 38.780930L49.162262 38.623413L47.918167 38.448257L46.639099 38.255447L45.325073 38.045319L43.958435 37.817551L42.556824 37.572128L41.102600 37.326706L39.631042 37.063965L38.106888 36.783585L36.565079 36.503510L34.987991 36.188156L33.393890 35.890137L31.781830 35.557449L30.170090 35.241776L28.540710 34.909103L26.928650 34.576096L25.316910 34.243423L23.740128 33.910431L22.215652 33.577423L20.709137 33.262070L19.272232 32.946716L17.905594 32.649002L16.609207 32.368622L15.400406 32.105881L14.278854 31.860458L13.245209 31.632690L12.334122 31.422562L11.510925 31.229752L10.809952 31.071915L10.196884 30.932037L9.706055 30.826813L9.285797 30.739227L8.987762 30.668976L8.742661 30.599045L8.584824 30.564072L8.479599 30.546432L8.427307 30.528778L8.409668 30.528778' style='stroke:rgb(0.000000%,0.000000%,0.000000%); stroke-width: 2.331253;stroke-linecap: round;stroke-linejoin: round;stroke-miterlimit: 10.000000;fill: none;'></path></svg>",
    valign: "-.33ex",
    width: ".7em",
    height: ".7em",
    alt: "curved arrow from left to left",
  },
  Associator: {
    src: "data:image/svg+xml;utf8,<svg version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' width='94.689453' height='88.461609' viewBox='0 0 94.689453 88.461609'><path d='M8.409668 1.967560L8.409668 86.065521' style='stroke:rgb(0.000000%,0.000000%,0.000000%); stroke-width: 4.363632;stroke-linecap: round;stroke-linejoin: round;stroke-miterlimit: 10.000000;fill: none;'></path><path d='M92.507629 1.967560L92.507629 86.065521' style='stroke:rgb(0.000000%,0.000000%,0.000000%); stroke-width: 4.363632;stroke-linecap: round;stroke-linejoin: round;stroke-miterlimit: 10.000000;fill: none;'></path><path d='M18.921921 86.065521L18.921921 86.030548L18.921921 85.977936L18.939560 85.873032L18.956879 85.680222L18.991852 85.434814L19.027145 85.084488L19.079758 84.663910L19.149689 84.156067L19.219620 83.560333L19.324844 82.876999L19.430069 82.123428L19.570267 81.317551L19.727783 80.459076L19.885620 79.565628L20.078110 78.636887L20.270905 77.690826L20.498688 76.744751L20.726456 75.798691L20.989197 74.870270L21.252258 73.941528L21.549973 73.048080L21.847687 72.154312L22.163040 71.295822L22.513687 70.454987L22.881653 69.649124L23.266937 68.843246L23.669876 68.072342L24.108093 67.301437L24.563324 66.565506L25.054169 65.811935L25.561996 65.093643L26.122772 64.358032L26.700867 63.622101L27.331573 62.903809L27.997574 62.167877L28.698227 61.414612L29.434158 60.661041L29.977280 60.117905L30.538055 59.574783L31.133484 59.031647L31.729218 58.470871L32.359924 57.892776L33.008286 57.332321L33.673965 56.736588L34.357285 56.140839L35.058243 55.545105L35.794189 54.932037L36.529800 54.318649L37.300705 53.687943L38.089249 53.039597L38.877792 52.391556L39.700989 51.743210L40.542145 51.077530L41.382980 50.411530L42.241470 49.728210L43.135239 49.045212L44.011047 48.344238L44.922134 47.643280L45.833237 46.942627L46.744324 46.241669L47.672745 45.523376L48.601486 44.822723L49.529907 44.104446L50.458649 43.385834L51.387390 42.667542L52.315811 41.966888L53.244553 41.248611L54.172974 40.547638L55.084061 39.847000L55.995163 39.146027L56.906250 38.445068L57.782059 37.762054L58.675827 37.078735L59.534317 36.395416L60.375153 35.729416L61.216309 35.081390L62.039505 34.415390L62.828049 33.784683L63.616592 33.153976L64.387497 32.523254L65.123108 31.910202L65.859055 31.314453L66.560013 30.718719L67.243332 30.122971L67.909012 29.544876L68.557373 28.984100L69.188080 28.423660L69.783813 27.880524L70.379242 27.337402L70.940018 26.811584L71.483139 26.286102L72.219070 25.532532L72.919724 24.814240L73.585724 24.095947L74.216431 23.377655L74.794525 22.676697L75.355301 21.958405L75.863129 21.257751L76.353973 20.539474L76.809204 19.820862L77.247421 19.085251L77.650360 18.331665L78.035645 17.578415L78.403610 16.789856L78.754257 15.983994L79.069611 15.178116L79.367325 14.319641L79.665039 13.461151L79.928101 12.585022L80.190842 11.691574L80.418610 10.798126L80.646393 9.904358L80.839188 9.010910L81.031677 8.117447L81.189514 7.276291L81.347031 6.452774L81.487228 5.682190L81.592453 4.981232L81.697678 4.332870L81.767609 3.772430L81.837540 3.281586L81.890152 2.878647L81.925446 2.563293L81.960419 2.318207L81.977737 2.160370L81.995392 2.055466L81.995392 1.985199L81.995392 1.967560' style='stroke:rgb(0.000000%,0.000000%,0.000000%); stroke-width: 4.363632;stroke-linecap: round;stroke-linejoin: round;stroke-miterlimit: 10.000000;fill: none;'></path></svg>",
    valign: "0",
    width: ".7em",
    height: ".7em",
    alt: "associator",
  },
  backoverslash: {
    src: "data:image/svg+xml;utf8,<svg version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' width='94.689453' height='88.461609' viewBox='0 0 94.689453 88.461609'><path d='M8.409668 86.065521L29.434158 65.041031' style='stroke:rgb(0.000000%,0.000000%,0.000000%); stroke-width: 4.363632;stroke-linecap: round;stroke-linejoin: round;stroke-miterlimit: 10.000000;fill: none;'></path><path d='M92.507629 1.967560L71.483139 22.992050' style='stroke:rgb(0.000000%,0.000000%,0.000000%); stroke-width: 4.363632;stroke-linecap: round;stroke-linejoin: round;stroke-miterlimit: 10.000000;fill: none;'></path><path d='M8.409668 1.967560L92.507629 86.065521' style='stroke:rgb(0.000000%,0.000000%,0.000000%); stroke-width: 4.363632;stroke-linecap: round;stroke-linejoin: round;stroke-miterlimit: 10.000000;fill: none;'></path></svg>",
    valign: "0",
    width: ".7em",
    height: ".7em",
    alt: "slash with back over slash",
  },
  BigCirc: {
    src: "data:image/svg+xml;utf8,<svg version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' width='108.435120' height='108.435120' viewBox='0 0 108.435120 108.435120'><path d='M105.494385 54.016541C105.494385 40.215042,100.011139 26.980743,90.252792 17.222397C80.494446 7.464050,67.260147 1.980804,53.458649 1.980804C39.657150 1.980804,26.422852 7.464050,16.664505 17.222397C6.906158 26.980743,1.422913 40.215042,1.422913 54.016541C1.422913 67.818024,6.906158 81.052338,16.664505 90.810684C26.422852 100.569031,39.657150 106.052277,53.458649 106.052277C67.260147 106.052277,80.494446 100.569031,90.252792 90.810684C100.011139 81.052338,105.494385 67.818024,105.494385 54.016541Z' style='stroke:rgb(0.000000%,0.000000%,0.000000%); stroke-width: 4.363632;stroke-linecap: round;stroke-linejoin: round;stroke-miterlimit: 10.000000;fill: none;'></path></svg>",
    valign: "0",
    width: ".7em",
    height: ".7em",
    alt: "big circle",
  },
  botright: {
    src: "data:image/svg+xml;utf8,<svg version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' width='94.689453' height='77.949371' viewBox='0 0 94.689453 77.949371'><path d='M8.409668 64.553268L92.507629 64.553268' style='stroke:rgb(0.000000%,0.000000%,0.000000%); stroke-width: 4.363632;stroke-linecap: round;stroke-linejoin: round;stroke-miterlimit: 10.000000;fill: none;'></path>  <path d='M71.483139 54.041031L92.507629 64.553268L71.483139 75.065521' style='stroke:rgb(0.000000%,0.000000%,0.000000%); stroke-width: 4.363632;stroke-linecap: round;stroke-linejoin: round;stroke-miterlimit: 10.000000;fill: none;'></path><path d='M50.458649 1.479797L50.458649 64.553268' style='stroke:rgb(0.000000%,0.000000%,0.000000%); stroke-width: 4.363632;stroke-linecap: round;stroke-linejoin: round;stroke-miterlimit: 10.000000;fill: none;'></path></svg>",
    valign: "-.33ex",
    width: ".7em",
    height: ".7em",
    alt: "up tack with right arrow",
  },
  cappededge: {
    // TODO fix SVG to be symmetric
    src: "data:image/svg+xml;utf8,<svg version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' width='73.664322' height='88.461609' viewBox='0 0 73.664322 88.461609'><path d='M50.458649 1.967560L50.458649 86.065521' style='stroke:rgb(0.000000%,0.000000%,0.000000%); stroke-width: 4.363632;stroke-linecap: round;stroke-linejoin: round;stroke-miterlimit: 10.000000;fill: none;'></path><path d='M29.434158 12.479797C32.709610 8.112640,37.263809 4.873764,42.464111 3.213257C47.664413 1.552750,53.252563 1.552750,58.452866 3.213257C63.653168 4.873764,68.207047 8.112640,71.482498 12.479797' style='stroke:rgb(0.000000%,0.000000%,0.000000%); stroke-width: 4.363632;stroke-linecap: round;stroke-linejoin: round;stroke-miterlimit: 10.000000;fill: none;'></path></svg>",
    valign: "0ex",
    width: ".7em",
    height: ".7em",
    alt: "vertical line with round cap",
  },
  crossing: {
    src: "data:image/svg+xml;utf8,<svg version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' width='94.689453' height='88.461609' viewBox='0 0 94.689453 88.461609'><path d='M8.409668 1.967560L92.507629 86.065521' style='stroke:rgb(0.000000%,0.000000%,0.000000%); stroke-width: 4.363632;stroke-linecap: round;stroke-linejoin: round;stroke-miterlimit: 10.000000;fill: none;'></path><path d='M92.507629 1.967560L8.409668 86.065521' style='stroke:rgb(0.000000%,0.000000%,0.000000%); stroke-width: 4.363632;stroke-linecap: round;stroke-linejoin: round;stroke-miterlimit: 10.000000;fill: none;'></path></svg>",
    valign: "0ex",
    width: ".7em",
    height: ".7em",
    alt: "crossing diagonal lines",
  },
  doublepoint: {
    src: "data:image/svg+xml;utf8,<svg version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' width='94.689453' height='88.461609' viewBox='0 0 94.689453 88.461609'><path d='M60.970901 44.016541C60.970901 41.228394,59.863144 38.554779,57.891769 36.583405C55.920410 34.612045,53.246796 33.504288,50.458649 33.504288C47.670502 33.504288,44.996887 34.612045,43.025528 36.583405C41.054153 38.554779,39.946411 41.228394,39.946411 44.016541C39.946411 46.804688,41.054153 49.478302,43.025528 51.449661C44.996887 53.421036,47.670502 54.528778,50.458649 54.528778C53.246796 54.528778,55.920410 53.421036,57.891769 51.449661C59.863144 49.478302,60.970901 46.804688,60.970901 44.016541Z' style='stroke:rgb(0.000000%,0.000000%,0.000000%); stroke-width: 0.000000;fill: rgb(0.000000%,0.000000%,0.000000%);'></path><path d='M8.409668 86.065521L92.507629 1.967560' style='stroke:rgb(0.000000%,0.000000%,0.000000%); stroke-width: 4.363632;stroke-linecap: round;stroke-linejoin: round;stroke-miterlimit: 10.000000;fill: none;'></path><path d='M13.665787 22.992050L8.409668 1.967560L29.434158 7.223679' style='stroke:rgb(0.000000%,0.000000%,0.000000%); stroke-width: 4.363632;stroke-linecap: round;stroke-linejoin: round;stroke-miterlimit: 10.000000;fill: none;'></path><path d='M8.409668 1.967560L92.507629 86.065521' style='stroke:rgb(0.000000%,0.000000%,0.000000%); stroke-width: 4.363632;stroke-linecap: round;stroke-linejoin: round;stroke-miterlimit: 10.000000;fill: none;'></path><path d='M71.483139 7.223679L92.507629 1.967560L87.251511 22.992050' style='stroke:rgb(0.000000%,0.000000%,0.000000%); stroke-width: 4.363632;stroke-linecap: round;stroke-linejoin: round;stroke-miterlimit: 10.000000;fill: none;'></path></svg>",
    valign: "0",
    width: ".7em",
    height: ".7em",
    alt: "two upward arrows crossed with disc",
  },
  OpenHopfUp: {
    src: "data:image/svg+xml;utf8,<svg version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' width='79.604401' height='88.461609' viewBox='0 0 79.604401 88.461609'><path d='M42.048981 58.470871L42.048981 1.967560' style='stroke:rgb(0.000000%,0.000000%,0.000000%); stroke-width: 4.363632;stroke-linecap: round;stroke-linejoin: round;stroke-miterlimit: 10.000000;fill: none;'></path><path d='M35.478821 15.107864L42.048981 1.967560L48.619141 15.107864' style='stroke:rgb(0.000000%,0.000000%,0.000000%); stroke-width: 4.363632;stroke-linecap: round;stroke-linejoin: round;stroke-miterlimit: 10.000000;fill: none;'></path><path d='M42.048981 86.065521L42.048981 78.181335' style='stroke:rgb(0.000000%,0.000000%,0.000000%); stroke-width: 4.363632;stroke-linecap: round;stroke-linejoin: round;stroke-miterlimit: 10.000000;fill: none;'></path><path d='M68.329590 29.562195L52.561234 29.562195L60.445404 44.016541' style='stroke:rgb(0.000000%,0.000000%,0.000000%); stroke-width: 4.363632;stroke-linecap: round;stroke-linejoin: round;stroke-miterlimit: 10.000000;fill: none;'></path><path d='M31.536743 29.562195L31.501770 29.579849L31.431503 29.597488L31.273987 29.667419L31.046219 29.755005L30.730865 29.877884L30.310287 30.035400L29.784805 30.245529L29.154099 30.490936L28.418152 30.771332L27.612289 31.086685L26.736160 31.437012L25.807419 31.822617L24.826385 32.225555L23.827713 32.628494L22.829041 33.049072L21.830368 33.486969L20.831680 33.907547L19.885620 34.327805L18.957199 34.748383L18.063431 35.168961L17.222595 35.571899L16.416718 35.957199L15.663147 36.360123L14.962494 36.728088L14.296494 37.096069L13.683441 37.464035L13.105331 37.832001L12.562210 38.182327L12.054047 38.532959L11.580856 38.900604L11.142960 39.251251L10.740021 39.619217L10.337082 39.969543L9.986755 40.354828L9.636124 40.740448L9.303436 41.125732L9.005402 41.511353L8.707703 41.931610L8.444962 42.352188L8.181900 42.772766L7.936798 43.210663L7.726349 43.666214L7.516220 44.139404L7.341049 44.612274L7.183212 45.103119L7.043350 45.610962L6.920471 46.119110L6.832901 46.627274L6.745316 47.152756L6.710342 47.678558L6.675385 48.221695L6.692703 48.764816L6.710342 49.307953L6.762955 49.851074L6.850540 50.394211L6.955444 50.919693L7.078308 51.462814L7.235825 51.988617L7.410995 52.514114L7.621445 53.022263L7.849213 53.530426L8.094315 54.038269L8.374695 54.511459L8.672729 55.001984L9.005402 55.457520L9.338409 55.913071L9.706375 56.350967L10.091660 56.789200L10.494598 57.209457L10.932831 57.630035L11.388367 58.032974L11.791306 58.365967L12.229218 58.716293L12.684753 59.049286L13.157944 59.381973L13.648468 59.697327L14.156631 60.030319L14.699753 60.345673L15.260208 60.661041L15.838303 60.976395L16.451691 61.274414L17.082397 61.589767L17.748077 61.887482L18.414078 62.185516L19.114716 62.465576L19.833008 62.745972L20.568939 63.026352L21.322205 63.306732L22.093109 63.569489L22.881653 63.832230L23.687515 64.077637L24.511032 64.305420L25.334549 64.550507L26.158066 64.760971L27.016541 64.971100L27.857391 65.163895L28.715866 65.356705L29.574356 65.531860L30.415512 65.707031L31.273987 65.847214L32.132477 66.004730L32.990967 66.127609L33.831802 66.250153L34.672958 66.355057L35.513794 66.442963L36.354950 66.530548L37.178146 66.600479L38.001663 66.653091L38.825180 66.705704L39.631042 66.740677L40.437241 66.775635L41.243103 66.793289L42.048981 66.793289L42.854858 66.793289L43.660721 66.775635L44.466919 66.740677L45.272781 66.705704L46.096298 66.653091L46.919815 66.600479L47.743011 66.530548L48.584167 66.442963L49.425003 66.355057L50.266159 66.250153L51.106995 66.127609L51.965485 66.004730L52.823975 65.847214L53.682449 65.707031L54.523605 65.531860L55.382095 65.356705L56.240570 65.163895L57.081421 64.971100L57.939896 64.760971L58.763412 64.550507L59.586929 64.305420L60.410446 64.077637L61.216309 63.832230L62.004852 63.569489L62.775757 63.306732L63.529022 63.026352L64.264954 62.745972L64.983246 62.465576L65.683884 62.185516L66.349884 61.887482L67.015564 61.589767L67.646271 61.274414L68.259659 60.976395L68.837753 60.661041L69.398209 60.345673L69.941330 60.030319L70.449493 59.697327L70.940018 59.381973L71.413208 59.049286L71.868744 58.716293L72.306656 58.365967L72.709595 58.032974L73.165131 57.630035L73.603363 57.209457L74.006302 56.789200L74.391586 56.350967L74.759552 55.913071L75.092560 55.457520L75.425232 55.001984L75.723267 54.511459L76.003647 54.038269L76.248749 53.530426L76.476517 53.022263L76.686966 52.514114L76.862137 51.988617L77.019653 51.462814L77.142517 50.919693L77.247421 50.394211L77.335007 49.851074L77.387619 49.307953L77.405258 48.764816L77.422577 48.221695L77.387619 47.678558L77.352646 47.152756L77.265060 46.627274L77.177490 46.119110L77.054611 45.610962L76.914749 45.103119L76.756912 44.612274L76.581741 44.139404L76.371613 43.666214L76.161163 43.210663L75.916061 42.772766L75.653000 42.352188L75.390259 41.931610L75.092560 41.511353L74.794525 41.125732L74.461838 40.740448L74.111206 40.354828L73.760880 39.969543L73.357941 39.619217L72.955002 39.251251L72.517105 38.900604L72.043915 38.532959L71.535751 38.182327L70.992630 37.832001L70.414520 37.464035L69.801468 37.096069L69.135468 36.728088L68.434814 36.360123L67.681244 35.957199L66.875366 35.571899L66.034531 35.168961L65.140762 34.748383L64.212341 34.327805L63.266281 33.907547L62.267593 33.486969L61.268921 33.049072L60.270248 32.628494L59.271576 32.225555L58.290543 31.822617L57.361801 31.437012L56.485672 31.086685L55.679810 30.771332L54.943863 30.490936L54.313156 30.245529L53.787674 30.035400L53.367096 29.877884L53.051743 29.755005L52.823975 29.667419L52.666458 29.597488L52.596191 29.579849L52.561234 29.562195' style='stroke:rgb(0.000000%,0.000000%,0.000000%); stroke-width: 4.363632;stroke-linecap: round;stroke-linejoin: round;stroke-miterlimit: 10.000000;fill: none;'></path></svg>",
    valign: "0ex",
    width: ".7em",
    height: ".7em",
    alt: "Vertical arrow with enveloping circular arrow",

type dbnMacro = {
  [key: string]: string | [string, string];
};
const dbnMacros: dbnMacro = {
  dbnsymb: "dbnsymb",
};

Object.keys(dbnData).forEach(
  (key) => (dbnMacros[key] = ["Macro", `\\dbnsymb{${key}}`])
);

dbnsymbMethods.dbnsymb = function (parser: TexParser, name: string) {
  const arg = parser.GetArgument(name);
  if (!dbnData[arg]) return;
  parser.Push(parser.create("token", "mglyph", dbnData[arg])); // NOTE mglyph gets TeX class ORD (as desired)
};
dbnsymbMethods.Macro = BaseMethods.Macro;

new CommandMap("dbnsymb-macros", dbnMacros, dbnsymbMethods);

export const configuration = Configuration.create("dbnsymb", {
  handler: {
    macro: ["dbnsymb-macros"],
  },
});
